---
- name: copy private CA
  ansible.builtin.copy:
    src: myca.pem
    dest: /usr/share/certs/trusted/

- name: create sym-link in /etc/ssl/certs/
  ansible.builtin.shell:
    certctl rehash

- name: create server cert directory
  ansible.builtin.file:
    path: /usr/local/etc/openldap/certs
    state: directory

- name: copy server crt
  ansible.builtin.copy:
    src:  "{{ server_crt }}"
    dest: /usr/local/etc/openldap/certs
    mode: '0640'
    group: wheel
    owner: root

- name: copy server key
  ansible.builtin.copy:
    src:  "{{ server_key }}"
    dest: /usr/local/etc/openldap/certs
    mode: '0600'
    group: wheel
    owner: root

