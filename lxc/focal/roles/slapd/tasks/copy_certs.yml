---
- name: remove directory /etc/ldap/certs
  ansible.builtin.file:
    path: /etc/ldap/certs
    state: absent

- name: create directory /etc/ldap/certs
  ansible.builtin.file:
    path: /etc/ldap/certs
    state: directory
    mode: '0755'

- name: copy certificate
  template:
    src: focal.crt
    dest: /etc/ssl/certs/

- name: copy certificate key
  template:
    src: focal.key
    dest: /etc/ssl/private/

- name: copy certificate
  template:
    src: focal.crt
    dest: /etc/ldap/certs/

- name: copy certificate key
  template:
    src: focal.key
    dest: /etc/ldap/certs/

- name: chown /etc/ldap/certs/focal.crt
  ansible.builtin.file:
    path: /etc/ldap/certs/focal.crt
    owner: openldap
    group: openldap
    mode: '0644'

- name: chown /etc/ldap/certs/focal.key
  ansible.builtin.file:
    path: /etc/ldap/certs/focal.key
    owner: openldap
    group: openldap
    mode: '0600'

