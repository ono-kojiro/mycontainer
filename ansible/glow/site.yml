# Install glow
# https://github.com/charmbracelet/glow

- name: install glow
  hosts: myserver

  #environment:
  #  http_proxy: http://proxy.example.com:8080
  #  https_proxy: http://proxy.example.com:8080

  tasks:
  - name: create keyring directory
    ansible.builtin.file:
      path: /etc/apt/keyrings
      state: directory

  - name: download gpg key
    ansible.builtin.shell : |
      curl -fsSL https://repo.charm.sh/apt/gpg.key | \
          gpg --dearmor -o /etc/apt/keyrings/charm.gpg

  - name: create source list
    ansible.builtin.shell : |
          echo "deb [signed-by=/etc/apt/keyrings/charm.gpg] https://repo.charm.sh/apt/ * *" | tee /etc/apt/sources.list.d/charm.list

  - name: install package
    ansible.builtin.apt:
      name:
      - glow
      state: present
      update_cache: true


